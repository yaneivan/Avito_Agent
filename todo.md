# TODO List для проекта Avito Agent

## Приоритет: Высокий

### 1. Проблема с извлечением характеристик по согласованной схеме
**Описание:** В текущей реализации может не происходить корректное извлечение характеристик по согласованной схеме, несмотря на то, что в коде есть логика для использования динамической схемы.
**Файл:** llm_engine.py, services/processing.py
**Функции:** extract_product_features, process_incoming_data
**Проблема:** Характеристики у товаров не заполняются или заполняются частично
**Статус:** Не решено

### 2. Непредсказуемое поведение при обработке объявлений с несколькими товарами
**Описание:** Когда в одном объявлении содержится несколько товаров, система ведет себя непредсказуемо.
**Файл:** llm_engine.py
**Функции:** extract_product_features
**Проблема:** Неясно, как выбирать характеристики основного товара или самого дорогого
**Статус:** Не решено

## Приоритет: Средний

### 3. Улучшение логики фильтрации товаров по relevance_score
**Описание:** В текущей реализации товары с relevance_score >= 1 проходят фильтрацию, но это может приводить к потере потенциально подходящих товаров.
**Файл:** services/processing.py
**Функции:** process_incoming_data
**Проблема:** Неправильная фильтрация может привести к потере данных
**Статус:** Не решено

### 4. Улучшение турнирного ранжирования
**Описание:** Турнирное ранжирование реализовано, но не всегда работает должным образом.
**Файл:** llm_engine.py, services/processing.py
**Функции:** tournament_ranking, process_incoming_data
**Проблема:** При малом количестве товаров турнир может не запускаться
**Статус:** Не решено

## Приоритет: Низкий

### 5. Улучшение обработки ошибок в процессе анализа
**Описание:** При ошибках VLM-анализа статус не всегда корректно обновляется.
**Файл:** services/processing.py
**Функции:** process_incoming_data
**Проблема:** Пользователь может не получать результаты при ошибках
**Статус:** Не решено

### 6. Передача visual_notes в турнирное ранжирование
**Описание:** В README упоминается необходимость передачи visual_notes из этапа экстракции в этап турнирного ранжирования.
**Файл:** llm_engine.py, services/processing.py
**Функции:** tournament_ranking
**Проблема:** В текущей реализации эти заметки не используются в турнирном ранжировании
**Статус:** Не решено
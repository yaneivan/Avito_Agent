# Тестирование в Avito Agent

## Общая информация

Проект включает в себя комплекс тестов для проверки основных компонентов системы. Все тесты находятся в директории `tests/`.

## Структура тестов

- `test_database.py` - тесты для работы с базой данных и основными сущностями (ChatSession, DeepResearchSession, Item и др.)
- `test_api.py` - тесты для API эндпоинтов
- `test_llm_engine.py` - тесты для LLM-движка и его функций (решение действий, извлечение признаков и др.)
- `test_services.py` - тесты для сервисного слоя (обработка чата, обработка данных и др.)
- `test_deep_research.py` - тесты для функционала глубокого исследования

## Запуск тестов

Для запуска всех тестов используйте команду:
```
pytest tests/
```

Для запуска отдельных тестов:
```
pytest tests/test_database.py
```

Для запуска с подробным выводом:
```
pytest tests/ -v
```

## Покрытие

Тесты покрывают:
- Базовые операции с сущностями в базе данных
- Основные API-эндпоинты
- Логику принятия решений LLM
- Обработку входящих данных
- Взаимодействие между различными компонентами системы

## Особенности

- Тесты используют фикстуры для создания изолированной среды (в т.ч. in-memory SQLite базу данных)
- Для тестирования асинхронных функций LLM-движка используются моки
- Тесты не зависят от внешних API и могут выполняться локально
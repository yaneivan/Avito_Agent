# TODO List

## Обрезка истории чата по токенам

- Реализовать обрезку истории чата при превышении лимита токенов (MAX_CHAT_HISTORY_TOKENS)
- Использовать информацию о токенах из ответа OpenAI API для принятия решения об обрезке
- Сохранять важные системные сообщения при обрезке

## Ошибка в параметрах quick search 

Он должен еще поддерживать limit параметр, но в определении инструмента его нет. По умолчанию ставится limit=10.

## ВОЗМОЖНАЯ ошибка в параметрах deep search

Передается ли параметр needs_visual? или он всегда true? 

## Интерфейс

### Строчки в сообщениях пользователя могут уехать за пузырь сообщения

### Добавить возможность сортировки продвинутой на странице с таблицей

Показать/скрыть объявления с enum вариантами, скрыть с ценой до, ценой после и тд. 

### "зависание" в момент отправки

Сообщение должно перемещаться в историю мгновенно, а не висеть в состоянии "отправляю..." долго. 

## Суммаризация чата

Когда чат становится длинным, он может выйти за пределы контекстного окна. Нужно добавить переодическую суммаризацию для укорачивания его. 